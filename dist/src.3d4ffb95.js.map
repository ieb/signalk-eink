{"version":3,"sources":["index.js"],"names":["row","col","r","c","displayList","defaultView","EInkRelativeAngle","EInkSpeed","EInkDistance","undefined","EInkAttitude","EInkBearing","EInkPossition","EInkLog","EInkCurrent","EInkPilot","EInkFix","EInkTemperature","EInkSys","EInkRatio","drawingOptions","Object","create","canvas","document","getElementById","themes","foreground","background","portrait","isKindle","width","height","theme","drawingContext","EInkDrawingContext","EInkUpdater","url","calculations","Calcs","context","period","update","EInkUIController","rotateControl","pageControl","themeControl","rotations","pages","addEventListener","e","debug"],"mappings":";AACA,cAGA,WA8EYA,IAAAA,EAAM,EACNC,EAAM,EACDC,SAAAA,IACDA,IAAAA,EAAIF,EAMDE,QALPF,EACW,IACPA,EAAM,EACNC,KAEGC,EAEFC,SAAAA,IACEF,OAAAA,EAKPG,IAAAA,EAAc,CACdC,YAAa,CACT,IAAIC,kBAAkB,iCAAiC,MAAOH,IAAID,KAClE,IAAIK,UAAU,iCAAkC,MAAcJ,IAAID,KAClE,IAAIK,UAAU,+BAAgC,MAAgBJ,IAAID,KAClE,IAAIM,aAAa,oCAAqC,MAAQL,IAAID,KAElE,IAAII,kBAAkB,kCAAkC,MAAMH,IAAID,KAClE,IAAIK,UAAU,6BAA8B,MAAkBJ,IAAID,KAClE,IAAII,kBAAkB,qBAAqB,SAASH,IAAID,SAAKO,EAAW,GACxE,IAAIC,aAAaP,IAAID,KAErB,IAAIK,UAAU,6BAA8B,MAAkBJ,IAAID,KAClE,IAAIS,YAAY,sCAAuC,OAAOR,IAAID,KAClE,IAAIU,cAAcT,IAAID,KACtB,IAAIW,QAAQV,IAAID,KAEhB,IAAIY,YAAYX,IAAID,KACpB,IAAIa,UAAUZ,IAAID,KAClB,IAAIc,QAAQb,IAAID,KAChB,IAAIe,gBAAgB,gCAAgC,QAAQd,IAAID,KAEhE,IAAIS,YAAY,yCAA0C,QAAQR,IAAID,KACtE,IAAIK,UAAU,+BAAgC,MAAgBJ,IAAID,KAClE,IAAIgB,QAAQf,IAAID,KAChB,IAAIS,YAAY,6BAA6B,MAAMR,IAAID,KAEvD,IAAIK,UAAU,yBAA0B,YAAoBJ,IAAID,KAChE,IAAIK,UAAU,kBAAmB,YAAoBJ,IAAID,KACzD,IAAIK,UAAU,uBAAwB,iBAAyBJ,IAAID,KACnE,IAAIK,UAAU,wBAAyB,aAAqBJ,IAAID,KAEhE,IAAIK,UAAU,wBAAyB,aAAqBJ,IAAID,KAChE,IAAIS,YAAY,oCAAqC,YAAYR,IAAID,KACrE,IAAIS,YAAY,sCAAuC,YAAYR,IAAID,KACvE,IAAII,kBAAkB,wBAAwB,aAAaH,IAAID,KAE/D,IAAIiB,UAAU,8BAA8B,iBAAkBhB,IAAKD,KACnE,IAAIiB,UAAU,4BAA4B,iBAAkBhB,IAAKD,OAyBrEkB,GADeC,OAAOC,OACL,CACjBC,OAAQC,SAASC,eAAe,UAChCC,OAtBS,CACF,IAAA,CACHC,WAAY,QACZC,WAAY,SAEN,MAAA,CACND,WAAY,QACZC,WAAY,SAGH,SAAA,CACTD,WAAY,MACZC,WAAY,SAEA,YAAA,CACZD,WAAY,QACZC,WAAY,UAOhBC,UAAWC,SACXC,MAAO,KACPC,OAAQ,IACRC,MAAO,QACP7B,YAAaA,IAEb8B,EAAiB,IAAIC,mBAAmBf,GAE7B,IAAIgB,YAAY,CAC3BC,IAAK,+BACLC,aAAc,IAAIC,MAClBC,QAASN,EACTO,OAAQ,MAEJC,SAEW,IAAIC,iBAAiB,CACpCH,QAASN,EACTU,cAAepB,SAASC,eAAe,UACvCoB,YAAarB,SAASC,eAAe,QACrCqB,aAActB,SAASC,eAAe,SACtCsB,UAAW,CAAE,WAAY,aACzBC,MAAO,CAAC,UAAW,SACnBtB,OAAQ,CAAC,MAAM,QAAQ,WAAW,iBAItCF,SAASC,eAAe,QAAQwB,iBAAiB,UAAW,SAASC,GACjEC,MAAM,iBAEV3B,SAASC,eAAe,QAAQwB,iBAAiB,WAAY,SAASC,GAClEC,MAAM,kBAEV3B,SAASC,eAAe,QAAQwB,iBAAiB,WAAY,SAASC,GAClEC,MAAM,kBAEV3B,SAASC,eAAe,QAAQwB,iBAAiB,SAAU,SAASC,GAChEC,MAAM,gBAtMlB","file":"src.3d4ffb95.js","sourceRoot":"../src","sourcesContent":["/*jshint node:false */\n\"use strict\";\n\n\n(function() {\n\n/*\nRaw PGNs seen on Luna from Raymarine bus\n\nEInkPilot\n   steering.autopilot.target.headingMagnetic.value (rad) pilot\n   steering.autopilot.state.value  (text)  pilot\n\nEInkLog\n   navigation.trip.log (m)   distance\n   navigation.log (m) distance\n   \nEInkFix\n   navigation.gnss.methodQuality (text) fix\n   navigation.gnss.horizontalDilution (float) fix\n   navigation.gnss.type (text) fix\n   navigation.gnss.satellites (int) fix\n   navigation.gnss.integrity (text) fix\n   \nEInkPossition\n   navigation.position (lat, lon, deg) position\n   navigation.datetime (date)\n   \nEInkCurrent\n   environment.current (drift (m/s), setTrue (rad))\n   \nEInkAttitude\n   navigation.attitude (roll, pitch, yaw rad)\n\n\n   environment.water.temperature (K) temperature\n   \n\n   steering.rudderAngle.value  (rad) angle\n   navigation.magneticVariation (rad) angle\n   navigation.courseOverGroundTrue (rad) angle \n   navigation.rateOfTurn (rad/s) anglerate\n   navigation.speedThroughWater (m/s) speed\n   navigation.headingMagnetic (rad) angle\n   navigation.speedOverGround (m/s) speed\n   environment.wind.speedApparent (m/s) speed\n   environment.wind.angleApparent (rad) wind\n   environment.depth.belowTransducer (m) meters\n\n   navigation.speedThroughWaterReferenceType (text)\n\nCalculated internally provided sufficient data is provided from the server.\n    navigation.courseOverGroundTrue if missing\n    navigation.courseOverGroundMagnetic if missing\n    navigation.headingTrue if missing\n    navigation.headingMagnetic if missing\n    performance.leeway needs roll, awa, stw\n\n    environment.wind.angleTrueWater if missing, requires awa, aws, stw\n    environment.wind.speedTrue if missing, requires awa, aws, stw\n\n    the following require tws && twa && stw && hdt \n    performance.polarSpeed polar speed at this twa\n*    performance.polarSpeedRatio polar speed ratio\n    performance.oppositeTrackMagnetic opposite track magnetic bearing\n    performance.oppositeTrackTrue opposite track true bearing\n    performance.oppositeHeadingMagnetic opposite geading magnetic bearing\n    performance.oppositeHeadingTrue opposite geading true bearing\n    performance.targetTwa target twa on this track for best vmg\n    performance.targetStw target speed on at best vmg and angle\n    performance.targetVmg target vmg -ve == downwind\n    performance.vmg current vmg at polar speed\n    performance.polarVmg current vmg at best angle\n*    performance.polarVmgRatio ratio between vmg and optimal vmg\n    environment.wind.windDirectionTrue True wind direction\n    environment.wind.windDirectionMagnetic Magnetic wind direction\n\n\n\n\n\n*/\n        var row = 0;\n        var col = 0;\n        function r() {\n            var r = row;\n            row++;\n            if ( row > 3) {\n                row = 0;\n                col++;\n            }\n            return r;\n        }\n        function c() {\n            return col;\n        }\n\n\n\n        var displayList = {\n            defaultView: [\n                new EInkRelativeAngle('environment.wind.angleApparent','awa', c(),r()),\n                new EInkSpeed('environment.wind.speedApparent', 'aws',        c(),r()),\n                new EInkSpeed('navigation.speedThroughWater', 'stw',          c(),r()),\n                new EInkDistance('environment.depth.belowTransducer', 'dbt',  c(),r()),\n\n                new EInkRelativeAngle('environment.wind.angleTrueWater','twa',c(),r()),\n                new EInkSpeed('environment.wind.speedTrue', 'tws',            c(),r()),\n                new EInkRelativeAngle('performance.leeway','leeway',c(),r(), undefined, 1),\n                new EInkAttitude(c(),r()),\n\n                new EInkSpeed('navigation.speedOverGround', 'sog',            c(),r()),\n                new EInkBearing('navigation.courseOverGroundMagnetic', 'cogm',c(),r()),\n                new EInkPossition(c(),r()),\n                new EInkLog(c(),r()),\n\n                new EInkCurrent(c(),r()),\n                new EInkPilot(c(),r()),\n                new EInkFix(c(),r()),\n                new EInkTemperature('environment.water.temperature','water',c(),r()),\n\n                new EInkBearing('environment.wind.windDirectionMagnetic', 'windM',c(),r()),\n                new EInkSpeed('performance.velocityMadeGood', 'vmg',          c(),r()),\n                new EInkSys(c(),r()),\n                new EInkBearing('navigation.headingMagnetic','hdm',c(),r()),\n\n                new EInkSpeed('performance.polarSpeed', 'polar stw',        c(),r()),\n                new EInkSpeed('performance.vmg', 'polar vmg',        c(),r()),\n                new EInkSpeed('performance.polarVmg', 'best polar vmg',        c(),r()),\n                new EInkSpeed('performance.targetStw', 'target stw',        c(),r()),\n\n                new EInkSpeed('performance.targetVmg', 'target vmg',        c(),r()),\n                new EInkBearing('performance.oppositeTrackMagnetic', 'op tack m',c(),r()),\n                new EInkBearing('performance.oppositeHeadingMagnetic', 'op head m',c(),r()),\n                new EInkRelativeAngle('performance.targetTwa','target twa',c(),r()),\n\n                new EInkRatio('performance.polarSpeedRatio',\"polar stw perf\", c(), r()),\n                new EInkRatio('performance.polarVmgRatio',\"polar vmg perf\", c(), r())\n\n\n            ]\n        };\n        var themes = {\n            \"day\": {\n                foreground: \"black\",\n                background: \"white\"\n            },\n            \"night\" : {\n                foreground: \"white\",\n                background: \"black\"\n\n            },\n            \"nightred\" : {\n                foreground: \"red\",\n                background: \"black\"\n            },\n            \"nightvision\" : {\n                foreground: \"green\",\n                background: \"black\"\n            }\n        };\n        var isPortrait = !(Object.create === undefined);\n        var drawingOptions = {\n            canvas: document.getElementById(\"canvas\"),            \n            themes: themes,\n            portrait: !isKindle, \n            width: 1850,\n            height: 600,\n            theme: \"night\",\n            displayList: displayList\n        };\n        var drawingContext = new EInkDrawingContext(drawingOptions);\n\n        var updater =  new EInkUpdater({\n            url: '/signalk/v1/api/vessels/self',\n            calculations: new Calcs(),\n            context: drawingContext,\n            period: 1000\n        });\n        updater.update();\n\n        var uiController = new EInkUIController({\n            context: drawingContext,\n            rotateControl: document.getElementById(\"rotate\"),\n            pageControl: document.getElementById(\"page\"),\n            themeControl: document.getElementById(\"theme\"),\n            rotations: [ \"portrate\", \"landscape\"],\n            pages: [\"default\", \"large\"],\n            themes: [\"day\",\"night\",\"nightred\",\"nightvision\"]\n        });\n\n\n        document.getElementById(\"body\").addEventListener(\"keydown\", function(e) {\n            debug(\"got keydown\");\n        });\n        document.getElementById(\"body\").addEventListener(\"auxclick\", function(e) {\n            debug(\"got auxclick\");\n        });\n        document.getElementById(\"body\").addEventListener(\"keypress\", function(e) {\n            debug(\"got keypress\");\n        });\n        document.getElementById(\"body\").addEventListener(\"scroll\", function(e) {\n            debug(\"got scroll\");\n        });\n\n\n\n})();\n\n"]}